# Name: cbe_members va.1.2 
# Type: Public side plugin
# cbe_frontauth companion: users accounts management (change and reset passwords)
# Author: Claire Brione
# URL: http://www.clairebrione.com/
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjExOiJjYmVfbWVtYmVycyI7czo2OiJhdXRob3IiO3M6MTM6
IkNsYWlyZSBCcmlvbmUiO3M6MTA6ImF1dGhvcl91cmkiO3M6Mjg6Imh0dHA6Ly93d3cuY2xh
aXJlYnJpb25lLmNvbS8iO3M6NzoidmVyc2lvbiI7czo1OiJhLjEuMiI7czoxMToiZGVzY3Jp
cHRpb24iO3M6Nzk6ImNiZV9mcm9udGF1dGggY29tcGFuaW9uOiB1c2VycyBhY2NvdW50cyBt
YW5hZ2VtZW50IChjaGFuZ2UgYW5kIHJlc2V0IHBhc3N3b3JkcykiO3M6NDoiY29kZSI7czox
Mjc3NzoiLyoNCioqIGNiZV9tZW1iZXJzDQoqKiBDbGllbnQtc2lkZSB0ZXh0cGF0dGVybiBw
bHVnaW4NCioqIEZyb250c2lkZSB1c2VyIHNlbGYgbWFuYWdlbWVudA0KKiogSW50ZW5kZWQg
dG8gYmUgcGx1Z2dlZCBpbnRvIGNiZV9mcm9udGF1dGgNCioqIENsYWlyZSBCcmlvbmUgLSBo
dHRwOi8vd3d3LmNsYWlyZWJyaW9uZS5jb20vDQoqKg0KKiogYS4xIC0gMjEgTWFyIDIwMTIg
LSBBbHBoYSA6IHJlc2V0IGFuZCBjaGFuZ2UgcGFzc3dvcmQNCioqIGEuMS4yLTI4IE1hciAy
MDEyIC0gRml4OiBtaXNzaW5nIGluY2x1ZGUgZm9yIHBhc3N3b3JkIGdlbmVyYXRpb24NCioq
DQogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqLw0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioNCiAqKg0KICoqIExvY2FsIGxhbmcgdmFsdWVzLCBw
b3NzaWJsZSBjdXN0b21pc2F0aW9uIGhlcmUNCiAqKg0KICoqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpmdW5jdGlvbiBfY2JlX21iX2xh
bmcoKQ0Kew0KICAgIHJldHVybiggYXJyYXkoICdhbGxfZmllbGRzX3JlcXVpcmVkJyAgICA9
PiAiTWVyY2kgZGUgcmVtcGxpciB0b3VzIGxlcyBjaGFtcHMiDQogICAgICAgICAgICAgICAg
ICwgJ25ld19wYXNzd29yZF9lcnJvcicgICAgID0+ICJMZXMgdmFsZXVycyBkdSBub3V2ZWF1
IG1vdCBkZSBwYXNzZSBuZSBjb3JyZXNwb25kZW50IHBhcyINCiAgICAgICAgICAgICAgICAg
LCAnb2xkX3Bhc3N3b3JkX2Vycm9yJyAgICAgPT4gIkFuY2llbiBtb3QgZGUgcGFzc2UgaW52
YWxpZGUiDQogICAgICAgICAgICAgICAgICwgJ3Bhc3N3b3Jkc19tdXN0X2JlX2RpZmYnID0+
ICJBbmNpZW4gZXQgbm91dmVhdSBtb3RzIGRlIHBhc3NlIGRvaXZlbnQgw6p0cmUgZGlmZsOp
cmVudHMiDQogICAgICAgICAgICAgICAgICwgJ3Bhc3N3b3JkX3Rvb19zaG9ydCcgICAgID0+
ICJOb3V2ZWF1IG1vdCBkZSBwYXNzZSB0cm9wIGNvdXJ0ICg2IGNhcmFjdMOocmVzIG1pbmlt
dW0pIg0KICAgICAgICAgICAgICAgICAsICdyZWdpc3RlcicgICAgICAgICAgICAgICA9PiAi
RW52b3llciINCiAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICkgOw0KfQ0KDQovKiA9
PT09PT09PT09PT09PT09PT09PT09PT09PT0gU3RvcCBlZGl0aW5nID09PT09PT09PT09PT09
PT09PT09PT09PT09PSAqLw0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioNCiAqKg0KICoqIEF2YWlsYWJsZSB0YWdzDQogKioNCiAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KLy8g
LS0gU2VsZiByZWdpc3RyYXRpb24NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9uIGNiZV9t
ZW1iZXJzKCAkYXR0cywgJHRoaW5nID0gJycgKQ0Kew0KICAgIC8qIC4uLiAodG8gYmUgY29u
dGludWVkKSAuLi4gKi8NCn0NCg0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gLS0gTWVtYmVyIG1h
bmFnZW1lbnQgdXRpbGl0aWVzDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCi8vIC0tIEdlbmVyYXRl
cyBmaWVsZHMgZm9yIHJlZ2lzdGVyIGZvcm0NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9u
IF9jYmVfbWJfZklucHV0KCAkZmllbGQsICR0eXBlLCAkZGF0YSA9IG51bGwgKQ0Kew0KICAg
ICRvdXQgPSBhcnJheSgpIDsNCiAgICBpZiggJGRhdGEgIT09IG51bGwgKQ0KICAgICAgICBl
eHRyYWN0KCAkZGF0YSApIDsNCg0KICAgIGlmKCAkdHlwZSAhPT0gJ3N1Ym1pdCcgKQ0KICAg
ICAgICAkb3V0W10gPSAnPGxhYmVsIGZvcj0iJy4gJGZpZWxkIC4nIj4nLiBfY2JlX21iX2dU
eHQoICRmaWVsZCApIC4nPC9sYWJlbD4nIDsNCiAgICAkb3V0W10gPSBmSW5wdXQoICR0eXBl
DQogICAgICAgICAgICAgICAgICAgLCAkZmllbGQNCiAgICAgICAgICAgICAgICAgICAsIGlz
c2V0KCAkJGZpZWxkICkgPyAkJGZpZWxkIDogJycNCiAgICAgICAgICAgICAgICAgICAsICcn
LCAnJywgJycsICcnLCAnJywgJGZpZWxkICkgOw0KICAgIHJldHVybiggam9pbiggbiwgJG91
dCApICkgOw0KfQ0KDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioNCiAqKg0KICoqIEZ1bmN0aW9ucyB0byBiZSBwbHVnZ2VkIGludG8gY2Jl
X2Zyb250YXV0aA0KICoqDQogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKiovDQoNCnJlZ2lzdGVyX2NhbGxiYWNrKCAnY2JlX21lbWJlcnNfcmVz
ZXRfcGFzc3dvcmQnICwgJ2NiZWZyb250YXV0aC5yZXNldF9wYXNzd29yZCcgICkgOw0KcmVn
aXN0ZXJfY2FsbGJhY2soICdjYmVfbWVtYmVyc19jaGFuZ2VfcGFzc3dvcmQnLCAnY2JlZnJv
bnRhdXRoLmNoYW5nZV9wYXNzd29yZCcgKSA7DQoNCi8vIC0tIFJlc2V0IHBhc3N3b3JkDQov
LyAtLSBBdmFpbGFibGUgc3RlcHMgOg0KLy8gLS0gY2JlX2ZhX2JlZm9yZV9sb2dpbg0KLy8g
LS0gY2JlX2ZhX2FmdGVyX2xvZ2luDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpmdW5jdGlvbiBjYmVf
bWVtYmVyc19yZXNldF9wYXNzd29yZCggJGV2ZW50LCAkc3RlcCwgJGRhdGE9bnVsbCApDQp7
DQogICAgZ2xvYmFsICRwcmVmcyA7DQoNCiAgICBpZiggJHN0ZXAgPT0gJ2NiZV9mYV9iZWZv
cmVfbG9naW4nICkNCiAgICB7DQogICAgICAgIGlmKCAkZGF0YSA9PT0gbnVsbCApDQogICAg
ICAgIHsNCiAgICAgICAgICAgIHJldHVybiggX2NiZV9tYl9wYXNzd2Rjcl9mb3JtKCAncmVz
ZXQnLCAkc3RlcCApICkgOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0K
ICAgICAgICAgICAgZXh0cmFjdCggJGRhdGEgKSA7DQogICAgICAgICAgICAvLyAgICAgICAg
XiBjb250YWlucyAkcF91c2VyaWQsICRsb2dpbl93aXRoLCAkdGFnX2Vycm9yLCAkY2xhc3Nf
ZXJyb3INCg0KICAgICAgICAgICAgJHJldHVybl91cmwgPSBQUk9UT0NPTC4kcHJlZnNbJ3Np
dGV1cmwnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLiBwcmVnX3JlcGxhY2UoICIvWz8m
XXJlc2V0PTEvIiwgIiIsIHNlcnZlclNldCgnUkVRVUVTVF9VUkknKSApIDsNCiAgICAgICAg
ICAgICRvdXQgPSBhcnJheSgpIDsNCiAgICAgICAgICAgIGV4dHJhY3QoIF9jYmVfbWJfZ2V0
X2F1dGhvciggJGxvZ2luX3dpdGgsICRwX3VzZXJpZCApICkgOw0KICAgICAgICAgICAgLy8g
ICAgICAgIF5jb250YWlucyAkbmV3cGFzcywgJG5hbWUsICRlbWFpbA0KDQogICAgICAgICAg
ICAkb3V0W10gPSAkbmV3cGFzcyA/IF9jYmVfbWJfc2V0X2F1dGhvcl9wYXNzKCAkbmV3cGFz
cywgJG5hbWUsICRlbWFpbCwgJHJldHVybl91cmwsICRwX3VzZXJpZCApDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICA6IGRvVGFnKCBfY2JlX21iX2dUeHQoICd1bmtub3duX2F1
dGhvcicsIGFycmF5KCAne25hbWV9JyA9PiAkcF91c2VyaWQgKSApDQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgLCAkdGFnX2Vycm9yLCAkY2xhc3NfZXJyb3IgKSA7
DQogICAgICAgICAgICAkb3V0W10gPSBjYmVfZnJvbnRhdXRoX2xpbmsoIGFycmF5KCAnbGFi
ZWwnID0+IF9jYmVfbWJfZ1R4dCggJ3JldmVydCcgKQ0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICwgJ2xpbmsnICA9PiAkcmV0dXJuX3VybA0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJ3RhcmdldCcg
PT4gJ19zZWxmJywgJ3dyYXB0YWcnID0+ICdwJyApICkgOw0KICAgICAgICAgICAgcmV0dXJu
KCBqb2luKCBuLCAkb3V0ICkgKSA7DQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZWlmKCAk
c3RlcCA9PSAnY2JlX2ZhX2FmdGVyX2xvZ2luJyApDQogICAgew0KICAgICAgICByZXR1cm4o
IF9jYmVfbWJfcGFzc3dkY3JfbGluayggJ3Jlc2V0JywgYXJyYXkoICdsYWJlbCcgPT4gX2Ni
ZV9tYl9nVHh0KCAncGFzc3dvcmRfZm9yZ290dGVuJyApICkgKSApIDsNCiAgICB9DQp9DQoN
Ci8vIC0tIENoYW5nZSBwYXNzd29yZA0KLy8gLS0gQXZhaWxhYmxlIHN0ZXBzIDoNCi8vIC0t
IGNiZV9mYV9iZWZvcmVfbG9nb3V0DQovLyAtLSBjYmVfZmFfYWZ0ZXJfbG9nb3V0DQovLyAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQpmdW5jdGlvbiBjYmVfbWVtYmVyc19jaGFuZ2VfcGFzc3dvcmQoICRl
dmVudCwgJHN0ZXAsICRkYXRhPW51bGwgKQ0Kew0KICAgIGdsb2JhbCAkcHJlZnMgOw0KDQog
ICAgaWYoICRzdGVwID09ICdjYmVfZmFfYmVmb3JlX2xvZ291dCcgKQ0KICAgIHsNCiAgICAg
ICAgaWYoICRkYXRhID09PSBudWxsICkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJu
KCBfY2JlX21iX3Bhc3N3ZGNyX2Zvcm0oICdjaGFuZ2UnLCAkc3RlcCApICkgOw0KICAgICAg
ICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgZXh0cmFjdCggJGRh
dGEgKSA7DQogICAgICAgICAgICAvLyAgICAgICBeIGNvbnRhaW5zICRwX3VzZXJpZCwgJHBf
cGFzc3dvcmQsICRwX3Bhc3N3b3JkXzEsICRwX3Bhc3N3b3JkXzIsICR0YWdfZXJyb3IsICRj
bGFzc19lcnJvcg0KDQogICAgICAgICAgICAkY29udHJvbHMgPSBhcnJheSggJ2FsbF9maWVs
ZHNfcmVxdWlyZWQnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0+ICJlbXB0
eSggXCRwX3Bhc3N3b3JkICkgfHwgZW1wdHkoIFwkcF9wYXNzd29yZF8xICkgfHwgZW1wdHko
IFwkcF9wYXNzd29yZF8yICkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJ29s
ZF9wYXNzd29yZF9lcnJvcicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPT4g
InR4cF92YWxpZGF0ZSggXCRwX3VzZXJpZCwgXCRwX3Bhc3N3b3JkLCBmYWxzZSApID09PSBm
YWxzZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAnbmV3X3Bhc3N3b3JkX2Vy
cm9yJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PiAiXCRwX3Bhc3N3b3Jk
XzEgIT09IFwkcF9wYXNzd29yZF8yIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAs
ICdwYXNzd29yZHNfbXVzdF9iZV9kaWZmJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICA9PiAiXCRwX3Bhc3N3b3JkXzEgPT09IFwkcF9wYXNzd29yZCINCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgLCAncGFzc3dvcmRfdG9vX3Nob3J0Jw0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICA9PiAic3RybGVuKCBcJHBfcGFzc3dvcmRfMSApIDwgNiIN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA7DQoNCiAgICAgICAgICAgICRpc2Vy
cm9yID0gZmFsc2UgOw0KICAgICAgICAgICAgJG91dCA9IGFycmF5KCkgOw0KDQogICAgICAg
ICAgICBmb3JlYWNoKCAkY29udHJvbHMgYXMgJGVyciA9PiAkY29uZCApDQogICAgICAgICAg
ICB7DQogICAgICAgICAgICAgICAgaWYoIGV2YWwoICJyZXR1cm4oICRjb25kICkgOyIgKSAp
DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAkaXNlcnJvciA9IHRy
dWUgOw0KICAgICAgICAgICAgICAgICAgICAkb3V0W10gPSBfY2JlX21iX21lc3NhZ2UoICRl
cnIsICR0YWdfZXJyb3IsICRjbGFzc19lcnJvciApIDsNCiAgICAgICAgICAgICAgICAgICAg
YnJlYWsgOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAg
ICAgaWYoICEgJGlzZXJyb3IgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICRy
ZXR1cm5fdXJsID0gUFJPVE9DT0wuJHByZWZzWydzaXRldXJsJ10NCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAuIHByZWdfcmVwbGFjZSggIi9bPyZdY2hhbmdlPTEvIiwgIiIsIHNl
cnZlclNldCgnUkVRVUVTVF9VUkknKSApIDsNCg0KICAgICAgICAgICAgICAgICRvdXRbXSA9
IF9jYmVfbWJfc2V0X2F1dGhvcl9wYXNzKCAkcF9wYXNzd29yZF8xLCAkcF91c2VyaWQNCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZmV0Y2go
ICdlbWFpbCcsICd0eHBfdXNlcnMnLCAnbmFtZScsICRwX3VzZXJpZCApDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRyZXR1cm5fdXJsICkg
Ow0KICAgICAgICAgICAgICAgICRvdXRbXSA9IGNiZV9mcm9udGF1dGhfbGluayggYXJyYXko
ICdsYWJlbCcgPT4gX2NiZV9tYl9nVHh0KCAncmV2ZXJ0JyApDQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJ2xpbmsnICA9PiAkcmV0dXJu
X3VybA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAsICd0YXJnZXQnID0+ICdfc2VsZicsICd3cmFwdGFnJyA9PiAncCcgKSApIDsNCiAgICAg
ICAgICAgIH0NCg0KICAgICAgICAgICAgaWYoICRpc2Vycm9yICkNCiAgICAgICAgICAgICAg
ICAkb3V0W10gPSAgX2NiZV9tYl9wYXNzd2Rjcl9mb3JtKCAnY2hhbmdlJywgJHN0ZXAsIGNv
bXBhY3QoIGFycmF5X2tleXMoICRkYXRhICkgKSApIDsNCg0KICAgICAgICAgICAgcmV0dXJu
KCBqb2luKCBuLCAkb3V0ICkgKSA7DQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZWlmKCAk
c3RlcCA9PSAnY2JlX2ZhX2FmdGVyX2xvZ291dCcgKQ0KICAgIHsNCiAgICAgICAgcmV0dXJu
KCBfY2JlX21iX3Bhc3N3ZGNyX2xpbmsoICdjaGFuZ2UnLCBhcnJheSggJ2xhYmVsJyA9PiBf
Y2JlX21iX2dUeHQoICdjaGFuZ2VfcGFzc3dvcmQnICkgKSApICkgOw0KICAgIH0NCn0NCg0K
Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KLy8gLS0gQ2FsbGJhY2tzIGFuZCBnZW5lcmFsIHV0aWxpdGll
cw0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQovLyAtLSBHZXRzIGFuZCByZXR1cm5zIGFkbWluIGxh
bmcgc3RyaW5ncw0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KZnVuY3Rpb24gX2NiZV9tYl9nVHh0KCAk
dGV4dCwgJGF0dHMgPSBhcnJheSgpICkNCnsNCiAgICBzdGF0aWMgJGFUZXh0cyA9IGFycmF5
KCkgOw0KICAgIGlmKCAhICRhVGV4dHMgKQ0KICAgICAgICAkYVRleHRzID0gbG9hZF9sYW5n
X2V2ZW50KCAnYWRtaW4nICkgKyBfY2JlX21iX2xhbmcoKSA7DQoNCiAgICBpZiggKCRzVGV4
dCA9IGdUeHQoICR0ZXh0ICkpID09PSAkdGV4dCAmJiBpc3NldCggJGFUZXh0c1sgJHRleHQg
XSApICkNCiAgICB7DQogICAgICAgICRzVGV4dCA9IHN0cnRyKCAkYVRleHRzWyAkdGV4dCBd
LCAkYXR0cyApIDsNCiAgICB9DQoNCiAgICByZXR1cm4oICRzVGV4dCApIDsNCn0NCg0KLy8g
LS0gUmV0dXJucyB0YWdnaWZpZWQgbWVzc2FnZQ0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KZnVuY3Rp
b24gX2NiZV9tYl9tZXNzYWdlKCAkdGV4dCwgJHRhZywgJGNsYXNzICkNCnsNCiAgICByZXR1
cm4oIGRvVGFnKCBfY2JlX21iX2dUeHQoICR0ZXh0ICksICR0YWcsICRjbGFzcyApICkgOw0K
fQ0KDQovLyAtLSBHZW5lcmF0ZXMgbGluayBmb3IgcmVzZXR0aW5nIG9yIGNoYW5naW5nIHBh
c3N3b3JkDQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpmdW5jdGlvbiBfY2JlX21iX3Bhc3N3ZGNyX2xp
bmsoICR0eXBlLCAkYXR0cyApDQp7DQogICAgZXh0cmFjdCggbEF0dHMoIGFycmF5ICggJ2xh
YmVsJyA9PiAnJyApDQogICAgICAgICAgICAgICAgICAgICsgX2NiZV9mYV9mb3JtYXQoKQ0K
ICAgICAgICAgICAgICAgICAgLCAkYXR0cw0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAg
ICAgICApIDsNCg0KICAgIHJldHVybiggY2JlX2Zyb250YXV0aF9saW5rKCBhcnJheSggJ2xh
YmVsJyA9PiBfY2JlX21iX2dUeHQoICR0eXBlPT0ncmVzZXQnID8gJ3Bhc3N3b3JkX2Zvcmdv
dHRlbicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdjaGFuZ2VfcGFzc3dvcmQnICkN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICdsaW5rJyA9PiAkdHlw
ZS4nPTEnLCAndGFyZ2V0JyA9PiAnX2dldCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAsICd3cmFwdGFnJyA9PiAncCcsICdjbGFzcycgPT4gJGNsYXNzID8gJGNs
YXNzIDogJycgKSApICkgOw0KfQ0KDQovLyAtLSBXcmFwIGZvcm0gZmllbGRzIGluIGZvcm0N
Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9uIF9jYmVfbWJfZm9ybSggJGNvbnRlbnRzLCAk
YWN0aW9uLCAkc3RlcCA9IG51bGwsICRtZXRob2QgPSBudWxsICkNCnsNCiAgICByZXR1cm4o
ICc8Zm9ybSBhY3Rpb249IicuICRhY3Rpb24gLiciIG1ldGhvZD0iJy4gKCRtZXRob2QgIT09
IG51bGwgPyAkbWV0aG9kIDogJ3Bvc3QnKSAuJyI+Jw0KICAgICAgICAgICAgLm4uICRjb250
ZW50cw0KICAgICAgICAgICAgLiAoJHN0ZXAgIT09IG51bGwgPyBuIC4gc0lucHV0KCAkc3Rl
cCApIDogJycpDQogICAgICAgICAgICAubi4gJzwvZm9ybT4nICkgOw0KfQ0KDQovLyAtLSBH
ZW5lcmF0ZXMgZm9ybSBmb3IgcmVzZXR0aW5nIG9yIGNoYW5naW5nIHBhc3N3b3JkDQovLyAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQpmdW5jdGlvbiBfY2JlX21iX3Bhc3N3ZGNyX2Zvcm0oICR0eXBlLCAk
c3RlcCwgJGRhdGE9bnVsbCApDQp7DQogICAgJG91dCA9IGFycmF5KCkgOw0KICAgIGlmKCAk
ZGF0YSAhPT0gbnVsbCApDQogICAgICAgIGV4dHJhY3QoICRkYXRhICkgOw0KDQogICAgaWYo
ICR0eXBlID09ICdyZXNldCcgKQ0KICAgICAgICAkb3V0W10gPSBjYmVfZnJvbnRhdXRoX2xv
Z25hbWUoIGFycmF5KCAnY2xhc3MnID0+ICdlZGl0JykgKSA7DQogICAgZWxzZQ0KICAgIHsg
Ly8gb2xkIHBhc3MsIG5ldyBwYXNzLCBuZXcgcGFzcw0KICAgICAgICAkbGFiZWxfbmV3ID0g
X2NiZV9tYl9nVHh0KCAnbmV3X3Bhc3N3b3JkJyApIDsNCiAgICAgICAgJG91dFtdID0gY2Jl
X2Zyb250YXV0aF9wYXNzd29yZCggYXJyYXkoICdjbGFzcycgPT4gJ2VkaXQnKQ0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBpc3NldCggJHBfcGFzc3dvcmQg
KSA/ICRwX3Bhc3N3b3JkIDogbnVsbCApIDsNCiAgICAgICAgJG91dFtdID0gX2NiZV9mYV9p
ZGVudGl0eSggJ25ld19wYXNzd29yZCcsIGFycmF5KCAnbGFiZWwnID0+ICRsYWJlbF9uZXcs
ICdsYWJlbF9zZngnID0+ICdfMScgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgLCBpc3NldCggJHBfcGFzc3dvcmRfMSApID8gJHBfcGFzc3dvcmRfMSA6IG51bGwgKSA7
DQogICAgICAgICRvdXRbXSA9IF9jYmVfZmFfaWRlbnRpdHkoICduZXdfcGFzc3dvcmQnLCBh
cnJheSggJ2xhYmVsJyA9PiAkbGFiZWxfbmV3LCAnbGFiZWxfc2Z4JyA9PiAnXzInICkNCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaXNzZXQoICRwX3Bhc3N3b3JkXzIg
KSA/ICRwX3Bhc3N3b3JkXzIgOiBudWxsICkgOw0KICAgIH0NCg0KICAgICRvdXRbXSA9IGNi
ZV9mcm9udGF1dGhfc3VibWl0KCBhcnJheSggJ2xhYmVsJyA9PiBfY2JlX21iX2dUeHQoICR0
eXBlPT0ncmVzZXQnID8gJ3Bhc3N3b3JkX3Jlc2V0Jw0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIDogJ2NoYW5nZV9wYXNzd29yZCcgKQ0KICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICwgJ2NsYXNzJyA9PiAncHVibGlzaCcgKSApIDsNCg0KICAgIHJl
dHVybiggX2NiZV9tYl9mb3JtKCBqb2luKCBuLCAkb3V0ICksIHBhZ2VfdXJsKCBhcnJheSgp
ICksICRzdGVwICkgKSA7DQp9DQoNCi8vIC0tIE1haWxzIG5ldyBwYXNzd29yZCAoY2hhbmdl
ZCBvciByZXNldCkNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9uIF9jYmVfbWJfZ2V0X2F1
dGhvciggJGxvZ2luX3dpdGgsICRuYW1lICkNCnsNCiAgICBpbmNsdWRlX29uY2UoIHR4cGF0
aC4nL2xpYi90eHBsaWJfYWRtaW4ucGhwJyApIDsNCg0KICAgICR1c2VybWFpbCA9IHNhZmVf
cm93cyggJ25hbWUsIGVtYWlsJywgJ3R4cF91c2VycycNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAsICgkbG9naW5fd2l0aCAhPSAnZW1haWwnID8gIm5hbWUiIDogImVtYWlsIikgLiI9
JyRuYW1lJyIgKSA7DQoNCiAgICBpZiggY291bnQoICR1c2VybWFpbCApICE9IDEgJiYgJGxv
Z2luX3dpdGggPT0gJ2F1dG8nICkNCiAgICAgICAgJHVzZXJtYWlsID0gc2FmZV9yb3dzKCAn
bmFtZSwgZW1haWwnLCAndHhwX3VzZXJzJywgImVtYWlsPSckbmFtZSciICkgOw0KDQogICAg
aWYoIGNvdW50KCAkdXNlcm1haWwgKSA9PSAxICkNCiAgICAgICAgcmV0dXJuKCBhcnJheSgg
J25hbWUnICAgID0+ICR1c2VybWFpbFswXVsgJ25hbWUnICBdDQogICAgICAgICAgICAgICAg
ICAgICAsICdlbWFpbCcgICA9PiAkdXNlcm1haWxbMF1bICdlbWFpbCcgXQ0KICAgICAgICAg
ICAgICAgICAgICAgLCAnbmV3cGFzcycgPT4gZ2VuZXJhdGVfcGFzc3dvcmQoIDYgKQ0KICAg
ICAgICAgICAgICAgICAgICAgKSApIDsNCg0KICAgIHJldHVybiggYXJyYXkoICduYW1lJyA9
PiAnJywgJ2VtYWlsJyA9PiAnJywgJ25ld3Bhc3MnID0+ICcnICkgKSA7DQp9DQoNCi8vIC0t
IE1haWxzIG5ldyBwYXNzd29yZCAoY2hhbmdlZCBvciByZXNldCkNCi8vIC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCmZ1bmN0aW9uIF9jYmVfbWJfc2VuZF9uZXdfcGFzc3dvcmQoICRwYXNzLCAkZW1haWws
ICRuYW1lLCAkcmV0dXJuX3VybCwgJGdpdmVuaWQgKQ0Kew0KICAgIGdsb2JhbCAkcHJlZnMs
ICR0eHBfdXNlciwgJHNpdGVuYW1lIDsNCiAgICAkY3Vycl91c2VyID0gJHR4cF91c2VyIDsN
Cg0KICAgICRtZXNzYWdlID0gX2NiZV9tYl9nVHh0KCdncmVldGluZycpLicgJy4kZ2l2ZW5p
ZC4nLCcuDQogICAgICAgIG4ubi5fY2JlX21iX2dUeHQoJ3lvdXJfcGFzc3dvcmRfaXMnKS4n
OiAnLiRwYXNzLg0KICAgICAgICBuLm4uX2NiZV9tYl9nVHh0KCdsb2dfaW5fYXQnKS4nOiAn
LiRyZXR1cm5fdXJsIDsNCg0KICAgICR0eHBfdXNlciA9ICRuYW1lIDsgLy8gdHhwTWFpbCgp
IHJlY2hlcmNoZSBSZWFsTmFtZSDDoCBwYXJ0aXIgZGUgbmFtZQ0KICAgICRvdXQgPSB0eHBN
YWlsKCRlbWFpbCwgIlskc2l0ZW5hbWVdICIuX2NiZV9tYl9nVHh0KCd5b3VyX25ld19wYXNz
d29yZCcpLCAkbWVzc2FnZSk7DQogICAgJHR4cF91c2VyID0gJGN1cnJfdXNlciA7DQogICAg
cmV0dXJuKCAkb3V0ICkgOw0KfQ0KDQovLyAtLSBSZXNldHMvY2hhbmdlcyBwYXNzd29yZCBh
bmQgbWFpbHMgaXQNCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9uIF9jYmVfbWJfc2V0X2F1
dGhvcl9wYXNzKCAkbmV3X3Bhc3MsICRuYW1lLCAkZW1haWwsICRyZXR1cm5fdXJsLCAkZ2l2
ZW5pZD1udWxsICkNCnsNCiAgICAkaGFzaCA9IGRvU2xhc2godHhwX2hhc2hfcGFzc3dvcmQo
JG5ld19wYXNzKSk7DQogICAgJGdpdmVuaWQgPSAoJGdpdmVuaWQgPT0gbnVsbCA/ICRuYW1l
IDogJGdpdmVuaWQpIDsNCg0KICAgIGlmKCBzYWZlX3VwZGF0ZSggJ3R4cF91c2VycycsICJw
YXNzID0gJyRoYXNoJyIsICJuYW1lID0gJyIuZG9TbGFzaCgkbmFtZSkuIiciICkgKQ0KICAg
ICAgICAkb3V0ID0gX2NiZV9tYl9nVHh0KCBfY2JlX21iX3NlbmRfbmV3X3Bhc3N3b3JkKCAk
bmV3X3Bhc3MsICRlbWFpbCwgJG5hbWUsICRyZXR1cm5fdXJsLCAkZ2l2ZW5pZCApDQogICAg
ICAgICAgICAgICAgICAgICAgICAgICA/ICdwYXNzd29yZF9zZW50X3RvJw0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgOiAnY291bGRfbm90X21haWwnICkNCiAgICAgICAgICAgICAu
ICcgJyAuICRnaXZlbmlkIDsNCg0KICAgIGVsc2UNCiAgICAgICAgJG91dCA9IF9jYmVfbWJf
Z1R4dCgnY291bGRfbm90X3VwZGF0ZV9hdXRob3InKS4nICcuaHRtbHNwZWNpYWxjaGFycygg
JGdpdmVuaWQgKSA7DQogICAgcmV0dXJuKCAkb3V0ICkgOw0KfQ0KIjtzOjQ6InR5cGUiO3M6
MToiMCI7czo1OiJvcmRlciI7czoxOiI1IjtzOjU6ImZsYWdzIjtzOjE6IjAiO3M6NDoiaGVs
cCI7czoyMzE0OiI8ZGl2IGlkPSJjYmUtcGx1Z2luLWhlbHAiPgoKPGgxPmNiZV9tZW1iZXJz
PC9oMT4KCjxwPkl0J3MgYSBjbGllbnQtc2lkZSBwbHVnaW4uCjxiciAvPkl0IGN1cnJlbnRs
eSBpcyBhIGNvbXBhbmlvbiBmb3IgPGNvZGU+Y2JlX2Zyb250YXV0aDwvY29kZT4gdGhhdCBh
ZGRzIHRoZSByZXNldCBhbmQgY2hhbmdlIHBhc3N3b3JkIGZlYXR1cmVzLjwvcD4KPHA+RnVs
bHkgcGx1Zy1hbmQtcGxheToganVzdCBpbnN0YWxsIGFuZCBhY3RpdmF0ZSwgYW5kIHlvdSdy
ZSBkb25lICE8L3A+CjxwPkRldmVsb3BlZCBhbmQgdGVzdGVkIHdpdGggVGV4dHBhdHRlcm4g
NC40LjE8L3A+CjxwIGNsYXNzPSJyZWFkbWUiPlJlcXVpcmVzIGNiZV9mcm9udGF1dGggMC45
IGFuZCBhYm92ZTwvcD4KCjxoMj5UYWJsZSBvZiBjb250ZW50czwvaDI+Cjx1bD4KICA8bGk+
PGEgaHJlZj0iI2ZlYXR1cmVzIj5GZWF0dXJlczwvYT48L2xpPgogIDxsaT48YSBocmVmPSIj
ZGwtaW5zdGFsbC1zdXBwIj5Eb3dubG9hZCwgaW5zdGFsbGF0aW9uLCBzdXBwb3J0PC9hPjwv
bGk+CiAgPGxpPjxhIGhyZWY9IiN0YWdzLWxpc3QiPlRhZ3MgbGlzdDwvYT48L2xpPgogIDxs
aT48YSBocmVmPSIjY2hhbmdlbG9nIj5DaGFuZ2Vsb2c8L2E+PC9saT4KPC91bD4KCjxoMiBp
ZD0iZmVhdHVyZXMiPkZlYXR1cmVzPC9oMj4KPHVsPgo8bGk+PGI+Q2hhbmdlIHBhc3N3b3Jk
PC9iPjogZGlzcGxheXMgYSBmb3JtIChvbGQgcGFzc3dvcmQsIG5ldyBwYXNzd29yZCB0d2lj
ZSksIGNvbnRyb2xzIGRhdGFzLCBpZiBjb3JyZWN0IGNoYW5nZXMgdGhlIHBhc3N3b3JkIGFu
ZCBtYWlscyBpdDwvbGk+CjxsaT48Yj5SZXNldCBwYXNzd29yZDwvYj46IGRpc3BsYXlzIGEg
Zm9ybSAodXNlcidzIG5hbWUgb3IgZW1haWwgZGVwZW5kaW5nIG9uIDxjb2RlPmNiZV9mcm9u
dGF1dGg8L2NvZGU+J3MgcGFyYW1ldGVycyksIGNvbnRyb2xzIGRhdGFzLCBpZiBjb3JyZWN0
IHJlc2V0cyB0aGUgcGFzc3dvcmQgYW5kIG1haWxzIGl0PC9saT4KPGxpPjxiPkVycm9yIG1l
c3NhZ2VzPC9iPjogY2FuIGJlIGVkaXRlZCBpbiB0aGUgZmlyc3QgbGluZXMgb2YgcGx1Z2lu
IGNvZGU8L2xpPgo8L3VsPgoKPGgyIGlkPSJkbC1pbnN0YWxsLXN1cHAiPkRvd25sb2FkLCBp
bnN0YWxsYXRpb24sIHN1cHBvcnQ8L2gyPgoKPHA+RG93bmxvYWQgZnJvbSA8YSBocmVmPSJo
dHRwOi8vdGV4dHBhdHRlcm4ub3JnL3BsdWdpbnMvMTI1MC9jYmVfbWVtYmVycyI+dGV4dHBh
dHRlcm4gcmVzb3VyY2VzPC9hPiBvciB0aGUgPGEgaHJlZj0iaHR0cDovL3d3dy5jbGFpcmVi
cmlvbmUuY29tL2NiZV9tZW1iZXJzIj5wbHVnaW4gcGFnZTwvYT4uPC9wPgo8cD5Db3B5L3Bh
c3RlIGluIHRoZSBBZG1pbiA+IFBsdWdpbnMgdGFiIHRvIGluc3RhbGwgb3IgdW5pbnN0YWxs
LCBhY3RpdmF0ZSBvciBkZXNhY3RpdmF0ZS48L3A+CjxwPlZpc2l0IHRoZSA8YSBocmVmPSJo
dHRwOi8vZm9ydW0udGV4dHBhdHRlcm4uY29tL3ZpZXd0b3BpYy5waHA/aWQ9Mzc3NjAiPmZv
cnVtIHRocmVhZDwvYT4gZm9yIHN1cHBvcnQuPC9wPgoKPGgyIGlkPSJ0YWdzLWxpc3QiPlRh
Z3MgbGlzdDwvaDI+Cgo8cD4oTGF0ZXIpPC9wPgoKPGgyIGlkPSJjaGFuZ2Vsb2ciPkNoYW5n
ZWxvZzwvaDI+Cjx1bD4KICA8bGk+MjggTWFyIDEyIC12IGEuMS4yLSBGaXg6IG1pc3Npbmcg
aW5jbHVkZSBmb3IgcGFzc3dvcmQgZ2VuZXJhdGlvbjwvbGk+CiAgPGxpPjIxIE1hciAxMiAt
IHYgYS4xIC0gQWxwaGE6IHJlc2V0IGFuZCBjaGFuZ2UgcGFzc3dvcmQ8L2xpPgo8L3VsPgoK
PC9kaXY+CjwhLS0gKioqIEJFR0lOIFBMVUdJTiBDU1MgKioqIC0tPgo8c3R5bGUgdHlwZT0i
dGV4dC9jc3MiPgojY2JlLXBsdWdpbi1oZWxwIC5yZWFkbWUgewogIGNvbG9yOiByZWQ7CiAg
Zm9udC13ZWlnaHQ6IGJvbGQ7Cn0KI2NiZS1wbHVnaW4taGVscCAuYWNjZW50IHsKICBmb250
LXdlaWdodDogYm9sZDsKfQojY2JlLXBsdWdpbi1oZWxwIC5saXN0IHRoewoJdGV4dC1hbGln
bjpsZWZ0OwoJY29sb3I6I2ZmZjsKCWJhY2tncm91bmQ6IzU1NTsKCXBhZGRpbmc6NnB4IDE2
cHggNnB4IDRweDsKCWJvcmRlci1yaWdodDoxcHggc29saWQgIzk5OTsKCWZvbnQtd2VpZ2h0
Om5vcm1hbDsKfQojY2JlLXBsdWdpbi1oZWxwIC5saXN0IHRoIGF7Cgljb2xvcjojZmZmOwoJ
ZGlzcGxheTpibG9jazsKfQojY2JlLXBsdWdpbi1oZWxwIC5saXN0IHRoIGgyewoJbWFyZ2lu
OjA7Cglmb250LXNpemU6MTFweDsKfQojY2JlLXBsdWdpbi1oZWxwIC5saXN0IHRkewoJcGFk
ZGluZzo2cHggNHB4Owp9Cjwvc3R5bGU+CjwhLS0gKioqIEVORCBQTFVHSU4gQ1NTICoqKiAt
LT4KIjtzOjM6Im1kNSI7czozMjoiMzhlMTA2ZTA0MmQyZjM0MTAyYzYzOGE1MDM3ZWU3MDMi
O30=
